(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{28:function(e){e.exports=JSON.parse('{"select-accomodation":"V\xe1lasszon Sz\xe1ll\xe1st","check-in":"Bejelentkez\xe9s","check-out":"Kijelentkez\xe9s","adults":"Feln\u0151ttek sz\xe1ma"}')},29:function(e){e.exports=JSON.parse('{"select-accomodation":"Select Accomodation","check-in":"Check in","check-out":"Check out","adults":"Adults"}')},34:function(e,t,n){},35:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(26),o=n.n(s),i=(n(34),n(2)),l=(n(35),n(3)),r=n(0),d=n(9),u=n.n(d),j=(n(60),n(28)),b=n(29),h=function(e){var t,n,a=Object(c.useState)([]),s=Object(i.a)(a,2),o=s[0],l=s[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),m=h[0],O=h[1],f=Object(c.useState)(""),g=Object(i.a)(f,2),v=g[0],x=g[1],p=Object(c.useState)(1),w=Object(i.a)(p,2),k=w[0],N=w[1],S=Object(c.useState)(""),D=Object(i.a)(S,2),y=D[0],C=D[1],M=Object(c.useState)(""),T=Object(i.a)(M,2),J=T[0],z=T[1],F=Object(c.useState)([]),I=Object(i.a)(F,2),A=I[0],B=I[1],E=Object(c.useState)("en"),Y=Object(i.a)(E,2),L=Y[0],W=Y[1],q=Object(c.useState)(!1),K=Object(i.a)(q,2),R=K[0],V=K[1],X=Object(c.useState)([]),$=Object(i.a)(X,2),G=$[0],H=$[1],P=function(e){return"hu"==L?j[e]:"en"==L?b[e]:e};Object(c.useEffect)((function(){u.a.get("http://localhost:8000/api/accomodations").then((function(e){l(e.data)})),window.localStorage.favs||(window.localStorage.favs="[]"),H(JSON.parse(window.localStorage.favs))}),[]),Object(c.useEffect)((function(){y&&u.a.get("http://localhost:8000/api/accomodations/"+y+"/bookings").then((function(e){B(e.data)}))}),[y]);var Q=new Date(m);Q.setDate(1);var U=new Date(Q.getTime()-864e5*(0==Q.getDay()?6:Q.getDay()-1)),Z=new Date(v);Z.setMonth(Z.getMonth()+1),Z.setDate(1),Z.setDate(0==Z.getDay()?1:8-Z.getDay());for(var _=[],ee=new Date,te=function(e){var t=e,n=!(t.getMonth()!=new Date(m).getMonth()&&t.getMonth()!=new Date(v).getMonth()),c=t.getTime()>=new Date(m).getTime()&&t.getTime()<=new Date(v).getTime(),a=t.getDate()==ee.getDate()&&t.getMonth()==ee.getMonth()&&t.getFullYear()==ee.getFullYear(),s=A.some((function(e){return n=t,c=t,a=e.checkIn,s=e.checkOut,n=new Date(n),a=new Date(a),c=new Date(c),s=new Date(s),a>=n&&a<=c||s>=n&&s<=c||a<=n&&s>=c;var n,c,a,s}));_.push({d:e,active:n,selected:c,taken:s,today:a})},ne=U;ne<=Z;ne=new Date(ne.getTime()+864e5))te(ne);return Object(r.jsxs)("div",{className:"container book",children:[Object(r.jsxs)("div",{className:"banner form-inline",children:[Object(r.jsxs)("div",{className:"language",children:[Object(r.jsx)("a",{href:"#",onClick:function(){return W("hu")},children:"hu"}),"\xa0\xa0|\xa0",Object(r.jsx)("a",{href:"#",onClick:function(){return W("en")},children:"en"})]}),Object(r.jsxs)("select",{className:"form-control",value:y,onChange:function(e){return C(e.target.value)},children:[Object(r.jsx)("option",{value:"",selected:!0,hidden:!0,children:P("select-accomodation")}),o.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.name})}))]}),Object(r.jsx)("label",{children:P("check-in")}),Object(r.jsx)("input",{className:"form-control",type:"date",value:m,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)("label",{children:P("check-out")}),Object(r.jsx)("input",{className:"form-control",type:"date",value:v,onChange:function(e){return x(e.target.value)}}),Object(r.jsx)("label",{children:P("adults")}),Object(r.jsx)("input",{className:"form-control adults",type:"number",value:k,onChange:function(e){return N(e.target.value)}})]}),""==m||""==v?Object(r.jsx)("div",{className:"accomodations",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("div",{className:"title",children:"Accomodations"}),Object(r.jsx)("button",{className:"btn btn-warning show-favs",onClick:function(){return V(!R)},children:R?"Show all":"Show favourites"}),Object(r.jsx)("div",{className:"row",children:(R?o.filter((function(e){return window.localStorage.favs||(window.localStorage.favs="[]"),JSON.parse(window.localStorage.favs).find((function(t){return t==e.id}))})):o).map((function(e,t){return Object(r.jsx)("div",{className:"col-4",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{style:{backgroundImage:"url(/img/".concat(e.img,")")},className:"img card-img-top",alt:"..."}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",onClick:function(){C(e.id),window.scrollTo(0,0)},children:e.name}),Object(r.jsx)("button",{className:"btn btn-warning fav",onClick:function(){window.localStorage.favs||(window.localStorage.favs="[]");var t=JSON.parse(window.localStorage.favs);t.find((function(t){return t==e.id}))||(t.push(e.id),H(t),window.localStorage.favs=JSON.stringify(t))},children:G.find((function(t){return t==e.id}))?"Remove from favourite":"Add to favourites"}),Object(r.jsx)("p",{className:"card-text",children:e.description})]})]})})}))})]})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"calendar",children:[Object(r.jsx)("div",{className:"title",children:"Calendar"}),["M","Tu","W","Th","F","Sa","Su"].map((function(e){return Object(r.jsx)("div",{className:"cell",children:e})})),_.map((function(e){return Object(r.jsxs)("div",{className:"cell square ".concat(e.active?"":"inactive"," ").concat(e.selected?"selected":""," ").concat(e.taken?"taken":""),children:[Object(r.jsx)("span",{className:"date ".concat(e.today?"today":""),children:e.d.getDate()}),e.taken?Object(r.jsx)("div",{className:"taken",children:"X"}):null]})}))]}),Object(r.jsxs)("div",{className:"summary",children:[Object(r.jsx)("div",{className:"title",children:null===(t=o.find((function(e){return e.id==y})))||void 0===t?void 0:t.name}),Object(r.jsxs)("div",{className:"days",children:[new Date(m).toLocaleDateString()," - ",new Date(v).toLocaleDateString(),Object(r.jsx)("br",{}),_.filter((function(e){return e.selected})).length," days",Object(r.jsx)("br",{}),k," adult",k>1?"s":""]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"price",children:["Total: $",(null===(n=o.find((function(e){return e.id==y})))||void 0===n?void 0:n.price)*_.filter((function(e){return e.selected})).length*k]}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:"Comment"}),Object(r.jsx)("textarea",{className:"form-control",value:J,onChange:function(e){return z(e.target.value)}}),_.some((function(e){return e.selected&&e.taken}))?Object(r.jsx)("div",{className:"error",children:"You cannot book for these dates."}):null,Object(r.jsx)("button",{className:"btn btn-primary btn-lg",disabled:_.some((function(e){return e.selected&&e.taken})),onClick:function(){u.a.post("http://localhost:8000/api/bookings",{accomodationId:y,checkOut:v,checkIn:m,bookingDate:new Date,comment:J}).then((function(){alert("Booked successfully!"),C(""),O(""),x(""),z("")})).catch((function(){alert("Could not make booking.")}))},children:"Book now"})]})]})]})},m=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=(t[1],Object(l.f)()),s=Object(l.g)();return Object(c.useEffect)((function(){!n&&s.pathname.startsWith("/admin")&&a.push("/admin/login")}),[n]),Object(r.jsx)("div",{className:"bg",children:Object(r.jsx)(l.c,{children:Object(r.jsx)(l.a,{path:"/",children:Object(r.jsx)(h,{})})})})},O=n(11);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O.a,{children:Object(r.jsx)(m,{})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.649bbcfb.chunk.js.map